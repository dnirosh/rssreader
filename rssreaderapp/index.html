<!DOCTYPE html> 
<html> 
	<head> 
	<title>Movies and Games</title> 
<!--
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.0a2/jquery.mobile-1.0a2.min.css" />	
<script src="http://code.jquery.com/jquery-1.4.4.min.js"></script>
<script src="http://code.jquery.com/mobile/1.0a2/jquery.mobile-1.0a2.min.js"></script>-->

<link rel="stylesheet" href="css-js/jquery.mobile-1.0a2.min.css" />	
<script src="css-js/jquery-1.4.4.min.js"></script>
<script src="css-js/jquery.mobile-1.0a2.min.js"></script>
<script src="css-js/jquery.ba-dotimeout.js"></script> 
<script src="css-js/jquery.dst.js"></script> 


</head> 
<body> 
<!-- Container page -->
<div data-role="page" data-theme="b" id="containerPage">
	<div data-role="header" id="pageheader">
		<h1>Movies and Games</h1>
		<h2> Welcome to the Movies and Games Application </h2>
		<h3> where you get to see only the hottest and latest of games'n movies over a beer !<h3>
	</div>	
	
	<div data-role="content">
        <a data-role="button" href="#page1">
            Movies
        </a>
        <a data-role="button" href="#page1">
            Games
        </a>
	</div>
	<div data-role="content" id="contentRSSDescription">
	</div>
    <div id="mgfooter" data-theme="a" data-role="footer" data-position="fixed" >
        <h4>Powered by Exilesoft - Evening Brew </h4>
    </div>	 
</div>
	
	<script>
	    var contentRSSDescription = $('#contentRSSDescription');
		  
		$(document).ready(function () {   	   
			contentRSSDescription.html('sending req1...');
			getRSSData(populate);
		});
		
		function getRSSData(handler){
			//$('#contentRSSDescription').load('http://lkr.fxexchangerate.com/rss.xml');
		
		    var varURI = 'http://i.rottentomatoes.com/syndication/rss/upcoming.xml';
			
			$.ajax({type: 'GET', dataType: 'xml', url: varURI, success: handler ,
			beforeSend: function(xhr) {
				xhr.setRequestHeader("Access-Control-Allow-Origin", "*");
			},
			 error: function (xhr, textStatus, errorThrown) {
						contentRSSDescription.html('error:' + errorThrown);
					}
			});
		}
		
		function populate(xml){
			contentRSSDescription.html('debug.1');
			if(xml==null||xml=='')
			  contentRSSDescription.html('debug.xml is empty');
			else
		     contentRSSDescription.html($(xml).find("item").text());
			//alert(xml);
			var ind = 0;
			var itemArray = new Array();
	  
			$(xml).find("item").each(function(){
				var txt= $(this).find('title').text();
				itemArray[ind++] = txt;
				contentRSSDescription.html($(this).find("description").text());
				
			});
		}
		
	</script>

</body> 
</html> 